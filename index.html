<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Common Classes and Data Structures for Geometry Vectors • geovctrs</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="bootstrap-toc.css">
<script src="bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Common Classes and Data Structures for Geometry Vectors">
<meta property="og:description" content="Provides a set of common data structures
  to unite the plethora of geospatial processing packages
  in the R package ecosystem.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-home">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">geovctrs</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/paleolimbot/geovctrs/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="contents col-md-9">
<div id="geovctrs" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#geovctrs" class="anchor"></a>geovctrs</h1></div>
<!-- badges: start -->

<p>The goal of geovctrs is to provide a common set of classes and data structures to ensure that processing functions in the rapidly expanding R geospatial ecosystem are interchangable.</p>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>You can install the development version from <a href="https://github.com/">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="r"><span class="co"># install.packages("remotes")</span>
<span class="kw pkg">remotes</span><span class="kw ns">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html">install_github</a></span>(<span class="st">"paleolimbot/geovctrs"</span>)</pre></div>
<p>If you can load the package, you’re good to go!</p>
<div class="sourceCode" id="cb2"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">geovctrs</span>)</pre></div>
</div>
<div id="example" class="section level2">
<h2 class="hasAnchor">
<a href="#example" class="anchor"></a>Example</h2>
<p>This package has reasonable <code><a href="https://rdrr.io/pkg/sf/man/plot.html">plot()</a></code> and <code><a href="https://rdrr.io/r/base/print.html">print()</a></code> methods for WKB and WKT types, and provides a <a href="https://vctrs.r-lib.org/">vctrs</a> implementation for these types so that they “just work” with <a href="https://tibble.tidyverse.org/">tibble</a>, <a href="https://tidyr.tidyverse.org/">tidyr</a>, and <a href="https://dplyr.tidyverse.org/">dplyr</a> (&gt;=1.0.0) (among others).</p>
<div class="sourceCode" id="cb3"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="no">geo_example_wkt</span>)
<span class="co">#&gt; &lt;geo_wkt[6]&gt;</span>
<span class="co">#&gt; [1] NA_wkt_                                </span>
<span class="co">#&gt; [2] POINT (30 10)                          </span>
<span class="co">#&gt; [3] POINT EMPTY                            </span>
<span class="co">#&gt; [4] POINT Z (1 1 5)                        </span>
<span class="co">#&gt; [5] MULTIPOINT (10 40, 40 30, 20 20, 30 10)</span>
<span class="co">#&gt; [6] MULTIPOINT EMPTY</span>
<span class="fu"><a href="https://rdrr.io/r/utils/head.html">head</a></span>(<span class="fu"><a href="reference/geo_wkb.html">as_geo_wkb</a></span>(<span class="no">geo_example_wkt</span>))
<span class="co">#&gt; &lt;geo_wkb[6]&gt;</span>
<span class="co">#&gt; [1] NA_wkb_                  POINT (30 10)           </span>
<span class="co">#&gt; [3] POINT EMPTY              POINT Z (1 1)           </span>
<span class="co">#&gt; [5] MULTIPOINT[4] (10 40)…+3 MULTIPOINT EMPTY</span></pre></div>
<p>Most methods work on anything that can be interpreted as geometry, including character vectors and data.frames containing exactly one geometry column.</p>
<div class="sourceCode" id="cb4"><pre class="r"><span class="fu"><a href="reference/geo_plot.html">geo_plot</a></span>(<span class="st">"LINESTRING (30 10, 10 30, 40 40)"</span>)</pre></div>
<p><img src="reference/figures/README-ex-plot-1.png" width="100%"></p>
<p>Like any self-respecting geometry package, geovctrs contains a copy of the North Carolina dataset to play with:</p>
<div class="sourceCode" id="cb5"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(<span class="no">geo_nc</span>)
<span class="co">#&gt; # A tibble: 100 x 12</span>
<span class="co">#&gt;    geometry                       NWBIR79 SID79 BIR79 NWBIR74 SID74 BIR74</span>
<span class="co">#&gt;    &lt;wkb&gt;                            &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 △▽[1] (-81.47276 36.23436)…+26      19     0  1364      10     1  1091</span>
<span class="co">#&gt;  2 △▽[1] (-81.23989 36.36536)…+25      12     3   542      10     0   487</span>
<span class="co">#&gt;  3 △▽[1] (-80.45634 36.24256)…+27     260     6  3616     208     5  3188</span>
<span class="co">#&gt;  4 △▽[3] (-76.00897 36.31960)…+37     145     2   830     123     1   508</span>
<span class="co">#&gt;  5 △▽[1] (-77.21767 36.24098)…+33    1197     3  1606    1066     9  1421</span>
<span class="co">#&gt;  6 △▽[1] (-76.74506 36.23392)…+21    1237     5  1838     954     7  1452</span>
<span class="co">#&gt;  7 △▽[1] (-76.00897 36.31960)…+23     139     2   350     115     0   286</span>
<span class="co">#&gt;  8 △▽[1] (-76.56251 36.34057)…+16     371     2   594     254     0   420</span>
<span class="co">#&gt;  9 △▽[1] (-78.30876 36.26004)…+13     844     2  1190     748     4   968</span>
<span class="co">#&gt; 10 △▽[1] (-80.02567 36.25023)…+5      176     5  2038     160     1  1612</span>
<span class="co">#&gt; # … with 90 more rows, and 5 more variables: CRESS_ID &lt;int&gt;, FIPSNO &lt;dbl&gt;,</span>
<span class="co">#&gt; #   FIPS &lt;chr&gt;, NAME &lt;chr&gt;, CNTY_ID &lt;dbl&gt;</span></pre></div>
</div>
<div id="sf-and-data-frame-support" class="section level2">
<h2 class="hasAnchor">
<a href="#sf-and-data-frame-support" class="anchor"></a>sf and data frame support</h2>
<p>The geovctrs package has tentative sf and data frame support for all processing functions, following the principle that well-mannered transformation functions return the same type and shape as the input. For data frames with exactly one geovctr column, transformation functions replace the output column with another geovctr (this might be of a different type, but will be a geovctr).</p>
<div class="sourceCode" id="cb6"><pre class="r"><span class="fu"><a href="reference/geo_bbox.html">geo_envelope</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/rev.html">rev</a></span>(<span class="no">geo_nc</span>))
<span class="co">#&gt; # A tibble: 100 x 12</span>
<span class="co">#&gt;    geometry                  NWBIR79 SID79 BIR79 NWBIR74 SID74 BIR74</span>
<span class="co">#&gt;    &lt;rect&gt;                      &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 △ (-81.74107 36.23436)…+4      19     0  1364      10     1  1091</span>
<span class="co">#&gt;  2 △ (-81.34754 36.36536)…+4      12     3   542      10     0   487</span>
<span class="co">#&gt;  3 △ (-80.96577 36.23388)…+4     260     6  3616     208     5  3188</span>
<span class="co">#&gt;  4 △ (-76.33025 36.07282)…+4     145     2   830     123     1   508</span>
<span class="co">#&gt;  5 △ (-77.90121 36.16277)…+4    1197     3  1606    1066     9  1421</span>
<span class="co">#&gt;  6 △ (-77.21767 36.23024)…+4    1237     5  1838     954     7  1452</span>
<span class="co">#&gt;  7 △ (-76.56358 36.16973)…+4     139     2   350     115     0   286</span>
<span class="co">#&gt;  8 △ (-76.95367 36.29452)…+4     371     2   594     254     0   420</span>
<span class="co">#&gt;  9 △ (-78.32125 36.19595)…+4     844     2  1190     748     4   968</span>
<span class="co">#&gt; 10 △ (-80.45301 36.25023)…+4     176     5  2038     160     1  1612</span>
<span class="co">#&gt; # … with 90 more rows, and 5 more variables: CRESS_ID &lt;int&gt;, FIPSNO &lt;dbl&gt;,</span>
<span class="co">#&gt; #   FIPS &lt;chr&gt;, NAME &lt;chr&gt;, CNTY_ID &lt;dbl&gt;</span></pre></div>
<p>For sf objects, this means that valid sf objects are returned:</p>
<div class="sourceCode" id="cb7"><pre class="r"><span class="fu"><a href="https://rdrr.io/r/base/library.html">library</a></span>(<span class="no">sf</span>)
<span class="co">#&gt; Linking to GEOS 3.7.2, GDAL 2.4.2, PROJ 5.2.0</span>
<span class="no">sf_nc</span> <span class="kw">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/sf/man/st_read.html">read_sf</a></span>(<span class="fu"><a href="https://rdrr.io/r/base/system.file.html">system.file</a></span>(<span class="st">"shape/nc.shp"</span>, <span class="kw">package</span> <span class="kw">=</span> <span class="st">"sf"</span>))
<span class="fu"><a href="reference/geo_bbox.html">geo_envelope</a></span>(<span class="no">sf_nc</span>)
<span class="co">#&gt; Simple feature collection with 100 features and 14 fields</span>
<span class="co">#&gt; geometry type:  POLYGON</span>
<span class="co">#&gt; dimension:      XY</span>
<span class="co">#&gt; bbox:           xmin: -84.32385 ymin: 33.88199 xmax: -75.45698 ymax: 36.58965</span>
<span class="co">#&gt; epsg (SRID):    4267</span>
<span class="co">#&gt; proj4string:    +proj=longlat +datum=NAD27 +no_defs</span>
<span class="co">#&gt; # A tibble: 100 x 15</span>
<span class="co">#&gt;     AREA PERIMETER CNTY_ CNTY_ID NAME  FIPS  FIPSNO CRESS_ID BIR74 SID74</span>
<span class="co">#&gt;    &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;dbl&gt;    &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt;</span>
<span class="co">#&gt;  1 0.114      1.44  1825    1825 Ashe  37009  37009        5  1091     1</span>
<span class="co">#&gt;  2 0.061      1.23  1827    1827 Alle… 37005  37005        3   487     0</span>
<span class="co">#&gt;  3 0.143      1.63  1828    1828 Surry 37171  37171       86  3188     5</span>
<span class="co">#&gt;  4 0.07       2.97  1831    1831 Curr… 37053  37053       27   508     1</span>
<span class="co">#&gt;  5 0.153      2.21  1832    1832 Nort… 37131  37131       66  1421     9</span>
<span class="co">#&gt;  6 0.097      1.67  1833    1833 Hert… 37091  37091       46  1452     7</span>
<span class="co">#&gt;  7 0.062      1.55  1834    1834 Camd… 37029  37029       15   286     0</span>
<span class="co">#&gt;  8 0.091      1.28  1835    1835 Gates 37073  37073       37   420     0</span>
<span class="co">#&gt;  9 0.118      1.42  1836    1836 Warr… 37185  37185       93   968     4</span>
<span class="co">#&gt; 10 0.124      1.43  1837    1837 Stok… 37169  37169       85  1612     1</span>
<span class="co">#&gt; # … with 90 more rows, and 5 more variables: NWBIR74 &lt;dbl&gt;, BIR79 &lt;dbl&gt;,</span>
<span class="co">#&gt; #   SID79 &lt;dbl&gt;, NWBIR79 &lt;dbl&gt;, geometry &lt;POLYGON [°]&gt;</span></pre></div>
<p>Other functions that accept geometry as input will treat sf and data frame objects as vectors with the length of <code><a href="https://rdrr.io/r/base/nrow.html">nrow(x)</a></code>:</p>
<div class="sourceCode" id="cb8"><pre class="r"><span class="fu"><a href="reference/geo_summary.html">geo_n_coordinates</a></span>(<span class="no">sf_nc</span>)
<span class="co">#&gt;   [1] 27 26 28 38 34 22 24 17 14  6  7  7 17  6 13 53 20 47 23 12 17 28 24</span>
<span class="co">#&gt;  [24] 20 22  6 10 45  9 18 23 34 28 27 33 37 27 30 19 29 17 31 34 18 16 35</span>
<span class="co">#&gt;  [47]  7 27 19 18 45 14 45 27 39 24 36 44 23 24 33 29 22 21 11 36 29 31 14</span>
<span class="co">#&gt;  [70] 24 32 35 27 31 22 19 16 29 40 20 27 29 31 18 27 14 31 30 36 17 39 17</span>
<span class="co">#&gt;  [93] 19 25 30 31 34 33 23 27</span>
<span class="fu"><a href="reference/geo_plot.html">geo_plot</a></span>(<span class="no">sf_nc</span>)</pre></div>
<p><img src="reference/figures/README-sf-nc-plot-1.png" width="100%"></p>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Browse source code at <br><a href="https://github.com/paleolimbot/geovctrs/">https://​github.com/​paleolimbot/​geovctrs/​</a>
</li>
<li>Report a bug at <br><a href="https://github.com/paleolimbot/geovctrs/issues">https://​github.com/​paleolimbot/​geovctrs/​issues</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li><a href="https://www.r-project.org/Licenses/GPL-3">GPL-3</a></li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Dewey Dunnington <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-9415-4582" target="orcid.widget" aria-label="ORCID"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

  <div class="dev-status">
<h2>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://www.tidyverse.org/lifecycle/#experimental"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://codecov.io/gh/paleolimbot/geovctrs?branch=master"><img src="https://codecov.io/gh/paleolimbot/geovctrs/branch/master/graph/badge.svg" alt="Codecov test coverage"></a></li>
</ul>
</div>
</div>
</div>


      <footer><div class="copyright">
  <p>Developed by Dewey Dunnington.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
